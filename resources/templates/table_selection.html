<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Свое Место</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
{% include 'header.html' %}
<div class="container">
    <h1>Выберите столик</h1>
    <div class="seating-layout">
        <div class="table-point" style="top: 10%; left: 16.5%;" onclick="selectTable(1)">
            <img src="/images/tableFor4.svg" alt="Table for 4">
        </div>
        <div class="table-point" style="top: 10%; left: 32.5%;" onclick="selectTable(2)">
            <img src="/images/tableFor4.svg">
        </div>
        <div class="table-point" style="top: 14%; left: 80%; width: 15%; height: 15%;" onclick="selectTable(3)">
            <img src="/images/tableFor6.svg">
        </div>

        <div class="table-point" style="top: 24%; left: 3%; transform: rotate(90deg); width: 15%; height: 15%;" onclick="selectTable(4)">
            <img src="/images/tableFor6.svg">
        </div>
        <div class="table-point" style="top: 24%; left: 16.5%; transform: rotate(90deg); width: 15%; height: 15%;" onclick="selectTable(5)">
            <img src="/images/tableFor6.svg">
        </div>
        <div class="table-point" style="top: 51%; left: 71%;" onclick="selectTable(6)">
            <img src="/images/tableFor4.svg">
        </div>

        <div class="table-point" style="top: 62%; left: 8%; width: 15%; height: 15%;" onclick="selectTable(7)">
            <img src="/images/tableFor2.svg">
        </div>
        <div class="table-point" style="top: 62%; left: 19%; width: 15%; height: 15%;" onclick="selectTable(8)">
            <img src="/images/tableFor2.svg">
        </div>
        <div class="table-point" style="top: 60%; left: 27%; transform: rotate(90deg); width: 15%; height: 15%;" onclick="selectTable(9)">
            <img src="/images/tableFor2.svg">
        </div>
        <div class="table-point" style="top: 60%; left: 54%; transform: rotate(90deg); width: 15%; height: 15%;" onclick="selectTable(10)">
            <img src="/images/tableFor2.svg">
        </div>

        <div class="table-point" style="top: 89%; left: 10%; width: 12%; height: 12%;" onclick="selectTable(11)">
            <img src="/images/tableFor5.svg">
        </div>
        <div class="table-point" style="top: 89%; left: 21.5%; width: 12%; height: 12%;" onclick="selectTable(12)">
            <img src="/images/tableFor5.svg">
        </div>
        <div class="table-point" style="top: 89%; left: 33%; width: 12%; height: 12%;" onclick="selectTable(13)">
            <img src="/images/tableFor5.svg">
        </div>
        <div class="table-point" style="top: 89%; left: 57.3%; width: 12%; height: 12%;" onclick="selectTable(14)">
            <img src="/images/tableFor5.svg">
        </div>
        <div class="table-point" style="top: 89%; left: 69.5%; width: 12%; height: 12%;" onclick="selectTable(15)">
            <img src="/images/tableFor5.svg">
        </div>
        <div class="table-point" style="top: 89%; left: 82%; width: 12%; height: 12%;" onclick="selectTable(16)">
            <img src="/images/tableFor5.svg">
        </div>
    </div>
</div>


</div>
    <form action="/result" method="post" id="reservationForm" style="display: none;">
        <input type="hidden" name="guest_count" value="{{ guest_count }}">
        <input type="hidden" name="reservation_date" value="{{ reservation_date }}">
        <input type="hidden" id="selected_table" name="table_number" value="">
        <button type="submit" class="button">Забронировать</button>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
    // Добавляем обработчики событий для всех столиков
    document.querySelectorAll('.table-point').forEach(table => {
        const img = table.querySelector('img');
        const originalSrc = img.src; // Исходное изображение
        const selectedSrc = originalSrc.replace('.svg', '_selected.svg'); // Изображение при выборе

        // Наведение мыши
        table.addEventListener('mouseenter', () => {
            if (!table.classList.contains('selected')) {
                img.src = selectedSrc;
            }
        });

        // Уход мыши
        table.addEventListener('mouseleave', () => {
            if (!table.classList.contains('selected')) {
                img.src = originalSrc;
            }
        });
    });
});

function selectTable(tableId) {
    console.log(`Столик ${tableId} выбран`);

    // Сброс выделения для всех столиков
    document.querySelectorAll('.table-point').forEach(point => {
        point.classList.remove('selected');
        const img = point.querySelector('img');
        img.src = img.src.replace('_selected.svg', '.svg');
    });

    // Выделяем выбранный столик
    const selectedTable = document.querySelector(`.table-point[onclick="selectTable(${tableId})"]`);
    if (selectedTable) {
        selectedTable.classList.add('selected');
        const img = selectedTable.querySelector('img');
        img.src = img.src.replace('.svg', '_selected.svg');
    }

    // Обновляем скрытое поле формы
    document.getElementById('selected_table').value = tableId;

    // Показываем форму бронирования
    document.getElementById('reservationForm').style.display = 'block';
}

</script>
</body>
</html>
